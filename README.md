# Домашнее задание к занятию `Введение. Экосистема. Архитектура. Жизненный цикл Docker-контейнера` - `Алаев Марат`


### Задача 1

Сценарий выполнения задачи:

создайте свой репозиторий на https://hub.docker.com;
выберите любой образ, который содержит веб-сервер Nginx;
создайте свой fork образа;
реализуйте функциональность: запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```html
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
Опубликуйте созданный fork в своём репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

___

https://hub.docker.com/r/e2754/marat-netology



### Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос: «Подходит ли в этом сценарии использование Docker-контейнеров или лучше подойдёт виртуальная машина, физическая машина? Может быть, возможны разные варианты?»
Детально опишите и обоснуйте свой выбор.

Сценарий:

1) высоконагруженное монолитное Java веб-приложение;
2) Nodejs веб-приложение;
3) мобильное приложение c версиями для Android и iOS;
4) шина данных на базе Apache Kafka;
5) Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana;
6) мониторинг-стек на базе Prometheus и Grafana;
7) MongoDB как основное хранилище данных для Java-приложения;
8) Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry.

___

1) думаю здесь незачем использовать Docker, наилучшая инфраструктура думаю будет 2 отдельный машины + балансировщик, так как приложение монолитное и у него нет отдельных микросервисов

2) тут можно или в один контейнер его запихнуть или в отдельную VM
думаю лучше в контейнер, так как будет меньше нагрузки от второй VM на физическую + памяти можно сэкономить так как образы docker весят куда меньше

3) если тут имеется ввиду сборка этих приложений, то скорее всего лучше будет просто создать два пайплайна которые по очереди будут собираться в одной VM а потом деплоиться на apple store и play market, если будет слишком медленно, то  docker тут ничем не поможет, лучше тогда создать еще одну vm с другим ранером и тогда уже будет лучше

4) тут нужно использовать и docker и дополнительные vm 
скажем на одной vm развернуть три контейнера elasticsearch, на другой vm развернуть logstash также в контейнере, и так же отдельно две ноды kibana
от этого я думаю мы достигнем максимальной надежности и производительности

5) Prometheus и Grafana можно разместить и в двух контейнерах на одной машине 
ну опять же, все еще будет зависеть от нагрузки, Prometheus можно поставить рядом logstash в одной vm на отдельном контейнере так думаю будет логично

6) базу данных лучше поставить отдельно, в несколько машин и реализовать репликации и бекапы

7) ci/cd лучше отдельно и ранеров тоже на отдельную машину, где как раз некоторые пайплайны можно будет реализовать через ранеров в docker 
и думаю закрытый приватный сервер, тоже должен стоять где-то отдельно 
так как со временем образы будут копиться, что приведет к нехватке памяти, если он будет стоять на машине с чем-то другим





### Задача 3
+ Запустите первый контейнер из образа centos c любым тегом в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера.
+ Запустите второй контейнер из образа debian в фоновом режиме, подключив папку /data из текущей рабочей директории на хостовой машине в /data контейнера.
+ Подключитесь к первому контейнеру с помощью docker exec и создайте текстовый файл любого содержания в /data.
+ Добавьте ещё один файл в папку /data на хостовой машине.
+ Подключитесь во второй контейнер и отобразите листинг и содержание файлов в /data контейнера.

___

![image](https://github.com/MaratAlaev/gitlab-hw/assets/46092593/46200a23-e3c8-4c6b-b141-17d1a9c3e321)


![image](https://github.com/MaratAlaev/gitlab-hw/assets/46092593/6f91fb99-91ef-4a2a-beda-ddcd47462e5c)


![image](https://github.com/MaratAlaev/gitlab-hw/assets/46092593/c5195890-9b46-4ef1-8006-88c88dec17e4)


### Задача 4 (*)
Воспроизведите практическую часть лекции самостоятельно.

Соберите Docker-образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.
___

[https://hub.docker.com/r/e2754/marat-netology](https://hub.docker.com/r/e2754/ansible)
